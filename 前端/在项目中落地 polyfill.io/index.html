<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>专治疑难杂症</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?976ca6952ba36abeabf574846f39a073";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();</script>
    <meta name="description" content="Talk is cheap,show me the code.">
    
    <link rel="preload" href="/zzynzz/assets/css/0.styles.153d6018.css" as="style"><link rel="preload" href="/zzynzz/assets/js/app.f0605947.js" as="script"><link rel="preload" href="/zzynzz/assets/js/2.21e8a4ac.js" as="script"><link rel="preload" href="/zzynzz/assets/js/3.9d3b57d2.js" as="script"><link rel="prefetch" href="/zzynzz/assets/js/10.bd7b94a1.js"><link rel="prefetch" href="/zzynzz/assets/js/11.5513f88c.js"><link rel="prefetch" href="/zzynzz/assets/js/12.38ac425d.js"><link rel="prefetch" href="/zzynzz/assets/js/13.786bd118.js"><link rel="prefetch" href="/zzynzz/assets/js/14.f204e6d0.js"><link rel="prefetch" href="/zzynzz/assets/js/15.902f4edb.js"><link rel="prefetch" href="/zzynzz/assets/js/16.d27f04da.js"><link rel="prefetch" href="/zzynzz/assets/js/17.2974f4b9.js"><link rel="prefetch" href="/zzynzz/assets/js/18.816709f9.js"><link rel="prefetch" href="/zzynzz/assets/js/19.37a1b662.js"><link rel="prefetch" href="/zzynzz/assets/js/20.b2ff72a1.js"><link rel="prefetch" href="/zzynzz/assets/js/21.9a8cce48.js"><link rel="prefetch" href="/zzynzz/assets/js/22.c3987554.js"><link rel="prefetch" href="/zzynzz/assets/js/23.47bef25a.js"><link rel="prefetch" href="/zzynzz/assets/js/24.fc465540.js"><link rel="prefetch" href="/zzynzz/assets/js/25.c593033a.js"><link rel="prefetch" href="/zzynzz/assets/js/26.bd0d80fc.js"><link rel="prefetch" href="/zzynzz/assets/js/27.14177009.js"><link rel="prefetch" href="/zzynzz/assets/js/28.b415ecb4.js"><link rel="prefetch" href="/zzynzz/assets/js/4.8a6307b4.js"><link rel="prefetch" href="/zzynzz/assets/js/5.0cedaa36.js"><link rel="prefetch" href="/zzynzz/assets/js/6.f868859c.js"><link rel="prefetch" href="/zzynzz/assets/js/7.f1e1081c.js"><link rel="prefetch" href="/zzynzz/assets/js/8.37e28eec.js"><link rel="prefetch" href="/zzynzz/assets/js/9.c813d232.js">
    <link rel="stylesheet" href="/zzynzz/assets/css/0.styles.153d6018.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zzynzz/" class="home-link router-link-active"><!----> <span class="site-name">专治疑难杂症</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js 知识" class="dropdown-title"><span class="title">js 知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="js 知识" class="mobile-dropdown-title"><span class="title">js 知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/防抖/" class="nav-link">
  防抖
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/节流/" class="nav-link">
  节流
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/camelCase 实现/" class="nav-link">
  camelCase 实现
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/Promise/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/类与类的继承/" class="nav-link">
  类与类的继承
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/前端/在项目中落地 polyfill.io/" class="nav-link">
  在项目中落地 polyfill.io
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法与数据结构" class="mobile-dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/堆/" class="nav-link">
  堆
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/二叉树/" class="nav-link">
  二叉树
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/排序算法/" class="nav-link">
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/拓扑排序/" class="nav-link">
  拓扑排序
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/洗牌算法/" class="nav-link">
  洗牌算法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/大数加法/" class="nav-link">
  大数加法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/反转链表/" class="nav-link">
  反转链表
</a></li></ul></div></div> <a href="https://github.com/nashaofu/zzynzz" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js 知识" class="dropdown-title"><span class="title">js 知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="js 知识" class="mobile-dropdown-title"><span class="title">js 知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/防抖/" class="nav-link">
  防抖
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/节流/" class="nav-link">
  节流
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/camelCase 实现/" class="nav-link">
  camelCase 实现
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/Promise/" class="nav-link">
  Promise
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/js 知识/类与类的继承/" class="nav-link">
  类与类的继承
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/前端/在项目中落地 polyfill.io/" class="nav-link">
  在项目中落地 polyfill.io
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法与数据结构" class="mobile-dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/堆/" class="nav-link">
  堆
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/二叉树/" class="nav-link">
  二叉树
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/排序算法/" class="nav-link">
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/拓扑排序/" class="nav-link">
  拓扑排序
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/洗牌算法/" class="nav-link">
  洗牌算法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/大数加法/" class="nav-link">
  大数加法
</a></li><li class="dropdown-item"><!----> <a href="/zzynzz/算法与数据结构/反转链表/" class="nav-link">
  反转链表
</a></li></ul></div></div> <a href="https://github.com/nashaofu/zzynzz" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zzynzz/%E5%89%8D%E7%AB%AF/%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%90%BD%E5%9C%B0%20polyfill.io/#改造项目" class="sidebar-link">改造项目</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/zzynzz/%E5%89%8D%E7%AB%AF/%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%90%BD%E5%9C%B0%20polyfill.io/#结论" class="sidebar-link">结论</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><img src="/zzynzz/assets/img/polyfill.io.b8f74a8f.png" alt="polyfill.io"></p> <h1 id="在项目中落地-polyfill-io"><a href="#在项目中落地-polyfill-io" class="header-anchor">#</a> 在项目中落地 polyfill.io</h1> <p><a href="https://polyfill.io/" title="polyfill.io" target="_blank" rel="noopener noreferrer">polyfill.io<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个根据浏览器 UA 自动生成 polyfill 的服务，polyfill.io 是<a href="https://github.com/financial-times/polyfill-service" title="polyfill-service" target="_blank" rel="noopener noreferrer">开源的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，我们可以直接使用 polyfill.io 默认提供的服务，也可以自己部署。使用 polyfill.io 这样的服务主要是用来减小打包生成文件大小，让用户尽可能的减小文件加载。</p> <h2 id="改造项目"><a href="#改造项目" class="header-anchor">#</a> 改造项目</h2> <p>通常我们的项目都是通过脚手架创建的，例如使用 <a href="https://cli.vuejs.org/zh/" title="vue-cli" target="_blank" rel="noopener noreferrer">vue-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://create-react-app.dev/" title="create-react-app" target="_blank" rel="noopener noreferrer">create-react-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等。这些脚手架基本都使用 babel 来把 js 的新语法转换为 es5，同时也会根据源码中的使用的 js 新特性自动生成一些 polyfill。一份常见的<code>babel.config.js</code>文件如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> <span class="token string">'usage'</span> <span class="token comment">// 配合 browserslist 配置，自动填充相关兼容代码，新版本babel主要会添加core-js的引用</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>改造第一步，在 polyfill.io 上选择需要的特性，然后复制 js 链接到 HTML 中。</p> <p><img src="/zzynzz/assets/img/polyfill.b4c328b6.png" alt="polyfill"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>DEMO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://polyfill.io/v3/polyfill.min.js?features=es2016%2Ces2017%2Ces2018%2Ces2019%2Ces2020%2Ces2021%2Ces2022%2CResizeObserver%2Ces2015<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 其他内容 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>那么如果我们直接在 HTML 中引入 polyfill.io，就可能会导致同一个 polyfill 存在两份。所以我们需要把<code>useBuiltIns</code>修改为<code>false</code>。</p> <p>然后我们开始打包项目。既然做了修改，那我们就对比一下打包生成的 js 的大小吧，一比较才发现，修改后的文件竟然比修改前的足足大了几百 KB。</p> <p><img src="data:image/jpeg;base64,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" alt="这不科学"></p> <p>对打包生成的文件进行分析发下，文件里面生成了很多重复的代码，例如源码为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>生成后的文件为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">'__esModule'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
exports<span class="token punctuation">.</span>default <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span>

<span class="token keyword">function</span> <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> Constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>instance <span class="token keyword">instanceof</span> <span class="token class-name">Constructor</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Cannot call a class as a function'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">_defineProperties</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> descriptor <span class="token operator">=</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">||</span> <span class="token boolean">false</span>
    descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'value'</span> <span class="token keyword">in</span> descriptor<span class="token punctuation">)</span> descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">true</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> descriptor<span class="token punctuation">.</span>key<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">_createClass</span><span class="token punctuation">(</span><span class="token parameter">Constructor<span class="token punctuation">,</span> protoProps<span class="token punctuation">,</span> staticProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>protoProps<span class="token punctuation">)</span> <span class="token function">_defineProperties</span><span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> protoProps<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>staticProps<span class="token punctuation">)</span> <span class="token function">_defineProperties</span><span class="token punctuation">(</span>Constructor<span class="token punctuation">,</span> staticProps<span class="token punctuation">)</span>
  <span class="token keyword">return</span> Constructor
<span class="token punctuation">}</span>

<span class="token keyword">var</span> Hello <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Hello<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">_createClass</span><span class="token punctuation">(</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'sayHi'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> Hello
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span>default <span class="token operator">=</span> Hello
</code></pre></div><p>我们可以看到生成的文件中包含了<code>_classCallCheck</code>、<code>_defineProperties</code>、<code>_createClass</code>等内容，检查多个文件后发现，每个包含<code>class</code>的源文件生成的代码都包含了前面的这几个函数，他们之间没有被复用。</p> <p><img src="data:image/jpeg;base64,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jRQ3lqzIjnna8ZGGVgP2n/ZD+Evwv8C/BTwH4q8F+E9L0LWdf8MaM+oXllZxQXF272kUjNNIihpCXJYlieST1oA+q6KKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAr4q/b8+BHjz9o79na++GXw4W2bWrjULG5UXc3kReXbuWfL7W5x0GK+1aKAIoEMcEcbdVUA/gK8a+P/gb4l/Ej4a3vgr4V+Ll8EarqssMNxqnkGeaKwdtt0LfDLsnMZPlv2PAKEiRPaqKAPnHQf2TvgTovwb8PfAm48MQar4T8OT217DBdje019bP5v2qZl275JHLGTPysrMhXyztrw39rD4Rftk/Gez8VfDH4da34Jtfht4stobWQ6rHqCaxaJtTz/KeBXgfc6sV3rkBscYBH6AUUAeH+O/gdo3xE+AV18Add1GeDTr7SLfSZru2CLOEgVF3oHDqCdnQg9a8E8f/APBPj4D+L/hvpPw88NabbeB5LP7HDf6toenWNnqeqWUKiO4trm5jhWQrdLzIQ2C+GZXAKn7rooA/ND9or9nT9prXvAF5+zb+zfaeBfD/AMHL/SYNOWPUPt8Wp2pD75tjwiWJtxAYu6s7FmLZb5q++fhp4RbwB8OfCvgN7gXbeG9KsdNMwG0SmzgSHeB23bM4rtqKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Z" alt="这不对呀"></p> <p>为啥 helper 函数不能被复用呢？这里和<code>@babel/plugin-transform-runtime</code>这个插件有关，这个插件的官方文档是这样说的，`<em>A plugin that enables the re-use of Babel's injected helper code to save on codesize.（一个可以重复使用 Babel 的注入的 helper 代码来节省代码大小插件。）</em>”，经过一番文档查阅，变更后的 babel 配置如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 不注入polyfill</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">absoluteRuntime</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token comment">// 不使用 @babel/runtime-corejs2 或 @babel/runtime-corejs3，这里不设置就是用 @babel/runtime</span>
        <span class="token literal-property property">corejs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">helpers</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// generator 相关的运行时helper</span>
        <span class="token literal-property property">regenerator</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// version 不同，复用的helper范围会不一样，请使用最新版本@babel/runtime，版本越新，helper会越多，默认7.0.0-beta.0</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/runtime/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：<code>@babel/plugin-transform-runtime</code>不能当做 polyfill 去使用，它主要是提供一些<strong>babel 编译</strong>helper，例如语法层面的转换函数；polyfill 是提供一些兼容 API，例如<code>Array.prototype.flat</code>等。这是<code>@babel/plugin-transform-runtime</code>官方给的提示。</p> <blockquote><p>NOTE: Instance methods such as &quot;foobar&quot;.includes(&quot;foo&quot;) will only work with core-js@3. If you need to polyfill them, you can directly import &quot;core-js&quot; or use @babel/preset-env's useBuiltIns option.</p></blockquote> <h2 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h2> <p>改造为使用 polyfill.io 需要修改<code>@babel/preset-env</code>的<code>useBuiltIns</code>参数来禁止自动填充 polyfill，并且要使用<code>@babel/plugin-transform-runtime</code>来复用 babel 编译过程中生成的 helper 函数</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nashaofu/zzynzz/edit/master/docs/前端/在项目中落地 polyfill.io/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/20/2022, 7:53:57 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/zzynzz/assets/js/app.f0605947.js" defer></script><script src="/zzynzz/assets/js/2.21e8a4ac.js" defer></script><script src="/zzynzz/assets/js/3.9d3b57d2.js" defer></script>
  </body>
</html>
